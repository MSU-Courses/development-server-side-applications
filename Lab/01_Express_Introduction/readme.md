# Лабораторная работа №1. Введение в Express.js. Создание простого приложения "ToDo List"

## Цель работы

1. Понять базовую связку Express + MVC: контроллеры, роуты, представления.
2. Научиться обрабатывать формы (GET/POST), передавать данные в шаблоны и делать redirect после успешной отправки.
3. Реализовать минимальное приложение без БД с хранением данных в памяти процесса.

## Условие

Разработать приложение "ToDo List" с возможностью:

- Просмотра списка задач.
- Создания новой задачи.
- Переключения статуса задачи (выполнена/не выполнена).
- Удаления задачи.

## Шаги выполнения

### Шаг 1. Инициализация проекта

1. Создайте новую директорию для проекта и перейдите в неё:
   ```bash
   mkdir todo-app
   cd todo-app
   ```
2. Инициализируйте новый проект Node.js:
   ```bash
   npm init -y
   ```
3. Установите необходимые зависимости.
4. Создайте структуру проекта.
5. Настройте окружение для разработки.
   1. Укажите следующие параметры в .env файле:
      - `APP_NAME=TodoApp` - имя приложения.
      - `PORT=3000` - порт, на котором будет работать сервер.
      - `NODE_ENV=development` - режим разработки.

### Шаг 2. Настройка Express

1. Создайте файл `app.js` в корне проекта.
2. Настройте Express, подключите middleware для обработки форм и статических файлов.
3. Настройте маршруты для обработки запросов.
   1. `GET /` - отображение списка задач.
   2. `GET /new` - отображение формы создания задачи.
   3. `POST /new` - обработка формы создания задачи.
   4. `POST /:id/toggle` - переключение статуса задачи.
   5. `POST /:id/delete` - удаление задачи.
   6. `GET /about` - отображение статической страницы "О нас".
   7. Обработка 404 ошибок.
4. Запустите сервер и убедитесь, что он работает.

### Шаг 3. Реализация логики приложения

1. Создайте контроллеры для обработки логики приложения.
   1. Контроллер для обработки запросов на создание, обновление, удаление и отображение задач (`todoController.js`).
   2. Контроллер для обработки статической страницы "О нас" (`aboutController.js`).
   3. Контроллер для обработки 404 ошибок (`errorController.js`).
2. Создайте модели для хранения задач в памяти (_Используйте массив объектов для хранения задач_).
   1. Модель задачи (`todo.js`).
3. Создайте соответствующие HTTP-маршруты.
   1. `GET /` — список задач.
   2. `POST /new` - обработка формы создания задачи.
   3. `POST /:id/toggle` - переключение статуса задачи (выполнена/не выполнена).
   4. `POST /:id/delete` - удаление задачи.
   5. `GET /about` - статическая страница "О нас".
   6. 404 - страница "Не найдено".
4. Создайте представления для отображения страниц (_Используйте Pug или EJS_).
   1. Представление для списка задач (`index.pug`).
   2. Представление для формы создания задачи (`new.pug`).
   3. Представление для статической страницы "О нас" (`about.pug`).
   4. Представление для страницы 404 ошибки (`404.pug`).
   5. Макет для всех страниц (`layout.pug`).
5. Запустите сервер и протестируйте все функции приложения.

### Шаг 4. Дополнительное задание

> Данное задание не является обязательным, но позволит углубить понимание материала.

1. На странице `/` добавить выпадающий список (select) с вариантами фильтрации:
   - Все задачи (`all`)
   - Активные задачи (`active`)
   - Выполненные задачи (`completed`)
2. При выборе варианта фильтрации формируется запрос `GET /?status=active` (или `completed`).

## Контрольные вопросы

1. Чем отличаются HTML-маршруты от REST API?
2. Что такое `res.render` и `res.json`? В каких случаях что использовать?
3. Что такое middleware в Express и для чего используется `express.urlencoded`?
